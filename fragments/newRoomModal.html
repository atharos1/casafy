<div class="modal fade" id="newRoomModal" tabindex="-1" role="dialog" aria-labelledby="createRoomTitle"
	aria-hidden="true" data-backdrop="false">
	<div class="modal-dialog modal-dialog-centered" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="createRoomTitle">Crear habitación</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				<form>
					<div class="form-group row" style="padding-bottom: 10px">
						<div class="col-md-4">Nombre:</div>
						<div class="col-md-2">
							<input id="roomName" type="text" name="roomname"><br>
						</div>
					</div>
					<div class="form-group row" style="padding-bottom: 15px">
						<div class="col-md-4">Dispositivos:</div>
						<div class="col-md-5">
							<div class="list-group" id="devices" role="tablist" style="height:100px; border:2px solid #cecece;">
							</div>
						</div>
						<div class="col-md-3">
							<button type="button" class="btn btn-primary btn-sm" id="newDeviceBtn"
								data-toggle="modal" data-target="#newDeviceModal">Agregar</button>
							<button type="button" class="btn btn-primary btn-sm">Eliminar</button>
						</div>
					</div>
					<div class="form-group row" style="padding-bottom: 10px">
						<div class="col-md-4">Favorito:</div>
						<div class="col-md-5">
							<div class="form-group form-check">
								<input type="checkbox" class="form-check-input" id="favourite">
								<label class="form-check-label" for="favourite"></label>
							</div>
						</div>
					</div>
					<div class="form-group">
						<label for="roomImgPath">*Imágen de la habitación: </label>
						<input type="file" class="form-control-file" id="roomImgPath">
					</div>
				</form>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
				<button type="button" class="btn btn-primary">Guardar</button>
			</div>
		</div>
	</div>
</div>
<script>
	function createNewRoom() {
			var room = {
				name: $("#newRoom_name").val(),
				meta: "{\"isFavorite\":false,\"image\":\"rooms/kitchen.jpg\"}"
			};

			//TODO: MOSTRAR LOADER POR SI NOS CORTAN LA CONEXION EN EL PROCESO

			api.rooms
				.create(room)
				.then(data => {
					window.location.href = "room.html?id=" + data.room.id;
				})
				.catch(error => {
					alert("Request failed: " + error);
				});

		}
</script>